const svgmoban = [
    [
    `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 256" width="128" height="256"><defs><style>.bj{fill:`,
    `;}.biaotibj{fill:`,
    `;}.biaoti{text-anchor:middle;font-size:24px;font-family:'思源宋体','思源宋体 CN','Source Han Serif','Source Han Serif CN';font-weight:900;fill:#fff;}.biaotilat{text-anchor:middle;font-size:11px;font-family:'Zilla Slab';font-weight:600;letter-spacing:0.01em;fill:#fff;}.luhaobj{fill:`,
    `;}.luhao{text-anchor:middle;font-family:Bahnschrift;font-size:16pt;fill:#fff;}.chezhan{font-size:16px;font-family:'kGlowSansSCCompressedBold';font-weight:700;}.zhushi{writing-mode:tb;text-orientation:upright;font-size:9px;font-family:'kGlowSansSCExtendedBook';font-weight:400;text-anchor:middle}.fangxianglat,.fangxiang,.tishi{font-family:Bahnschrift,MiSans;font-weight:500;fill:#fff}.fangxiang{font-size:18px;}.fangxianglat{font-size:9pt;fill:`,
    `;font-weight:700;font-stretch:semi-condensed;text-anchor:middle}.tishi{font-size:12px;}</style></defs><g id="背景"><rect class="bj" width="128" height="256" /><rect class="biaotibj" width="128" height="57" /><rect class="biaotibj" y="228" width="128" height="28" /></g><g id="线路"><g id="线路1" transform="translate(0 0)"><rect class="luhaobj" x="1.5" y="65" width="34.5" height="28" /><text class="luhao" transform="translate(19.5 86.3)">`,
    `</text><g transform="translate(42.38,66) scale(1 0.9)"><path d="m 0.18900687,-2.6100014 c 1.05300003,0.513 2.49300003,1.341 3.11400003,1.80900003 l 0.513,-0.63000003 c -0.378,-0.261 -1.008,-0.63 -1.674,-0.99 l -0.09,-0.045 -0.09,-0.045 c -0.054,-0.036 -0.117,-0.063 -0.171,-0.099 l -0.09,-0.045 c -0.486,-0.252 -0.97200003,-0.486 -1.37700003,-0.666 l -0.135,0.144 v -1.566 H 4.3380069 v -0.702 h -8.685 v 0.702 h 3.76199997 v 6.885 h 0.774 z" id="path47" /><path d="m 4.0680069,7.1639986 h -2.043 v -1.737 h 2.439 v -0.675 h -2.439 v -1.863 h -0.738 v 4.275 H -0.33299313 V 10.826999 H 4.0680069 Z m -5.931,-2.862 c -0.09,-0.189 -0.234,-0.468 -0.387,-0.756 l -0.045,-0.09 c -0.09,-0.18 -0.189,-0.369 -0.279,-0.513 l -0.612,0.18 c 0.081,0.162 0.18,0.36 0.279,0.567 l 0.036,0.09 c 0.135,0.279 0.261,0.558 0.333,0.729 z m 1.34999997,0.27 H -4.3199931 v 0.657 h 3.80699997 z m -0.045,4.824 -0.072,-0.648 -1.08899997,0.252 c 0.135,-0.486 0.297,-1.197 0.45,-1.89 l 0.018,-0.09 c 0.108,-0.504 0.207,-0.999 0.27899997,-1.404 l -0.69299997,-0.126 c -0.045,0.432 -0.135,0.99 -0.234,1.557 l -0.018,0.09 c -0.009,0.072 -0.018,0.135 -0.036,0.198 l -0.018,0.099 c -0.117,0.648 -0.252,1.269 -0.36,1.701 l -0.099,0.018 c -0.054,0.009 -0.099,0.027 -0.144,0.036 l -0.099,0.018 c -0.666,0.135 -1.305,0.27 -1.755,0.36 l 0.171,0.6930004 c 0.531,-0.126 1.233,-0.2880004 1.962,-0.4590004 l 0.09,-0.018 c 0.171,-0.045 0.342,-0.081 0.513,-0.126 l 0.099,-0.018 0.09,-0.027 c 0.324,-0.072 0.64799997,-0.153 0.94499997,-0.216 z m -2.29499997,-0.558 c -0.027,-0.414 -0.09,-0.99 -0.18,-1.593 l -0.018,-0.09 -0.018,-0.099 v -0.054 l -0.018,-0.09 c -0.009,-0.036 -0.009,-0.063 -0.018,-0.099 l -0.018,-0.099 c -0.063,-0.396 -0.144,-0.783 -0.225,-1.107 l -0.594,0.099 c 0.081,0.378 0.171,0.837 0.243,1.305 l 0.018,0.099 c 0.009,0.063 0.018,0.126 0.027,0.198 l 0.018,0.09 c 0.081,0.585 0.144,1.143 0.162,1.557 z M 0.37800687,10.160999 V 7.8299986 H 3.3300069 v 2.3310004 z" id="path49" /></g><text class="chezhan" transform="translate(47.5 74.08)">`,
    `</text><g transform="translate(42.38,86) scale(1 0.9)"><path d="m -1.1879931,-0.74700137 c -0.018,-0.117 -0.036,-0.38700003 -0.036,-0.57600003 l -2.079,0.261 c 0.279,-0.27 0.567,-0.594 0.855,-0.936 l 0.054,-0.072 c 0.045,-0.063 0.099,-0.126 0.144,-0.18 l 0.063,-0.072 c 0.099,-0.135 0.207,-0.27 0.306,-0.405 l 0.063,-0.081 c 0.18,-0.243 0.351,-0.486 0.513,-0.72 0.162,0.072 0.43199997,0.315 0.54899997,0.459 0.351,-0.279 0.729,-0.639 0.99,-0.945 0.333,0.405 0.711,0.864 1.08000003,1.215 -0.74700003,0.513 -1.67400003,0.999 -2.394,1.233 l 0.28799997,0.62100003 c 0.882,-0.33300003 1.87200003,-0.85500003 2.59200003,-1.41300003 0.711,0.558 1.53,1.116 2.439,1.43100003 l 0.288,-0.63900003 c -0.702,-0.216 -1.566,-0.702 -2.223,-1.215 0.621,-0.567 1.224,-1.395 1.593,-2.16 l -0.459,-0.261 -0.108,0.045 h -2.205 c 0.171,-0.252 0.342,-0.576 0.468,-0.828 l -0.76500003,-0.126 c -0.342,0.747 -1.143,1.854 -2.08799997,2.538 l 0.18,-0.279 -0.639,-0.333 c -0.189,0.306 -0.423,0.693 -0.63,0.972 l -1.251,0.126 c 0.549,-0.729 1.188,-1.845 1.602,-2.754 l -0.693,-0.279 c -0.387,1.017 -1.134,2.268 -1.332,2.547 -0.207,0.288 -0.387,0.531 -0.513,0.549 l 0.216,0.657 c 0.117,-0.054 0.414,-0.126 1.548,-0.243 -0.396,0.522 -0.819,1.026 -0.999,1.188 -0.288,0.297 -0.54,0.53100003 -0.693,0.55800003 l 0.207,0.639 c 0.198,-0.09 0.702,-0.18 3.069,-0.522 z m 1.84499997,-3.77100003 0.036,-0.045 H 2.9430069 c -0.297,0.459 -0.72,0.972 -1.143,1.35 -0.45,-0.378 -0.86400003,-0.873 -1.14300003,-1.305 z m 2.45700003,4.11300003 c -0.441,-0.288 -1.368,-0.76500003 -2.025,-0.98100003 l -0.44100003,0.44100003 c 0.70200003,0.234 1.60200003,0.738 2.02500003,1.035 z m 0.711,2.00699997 c -0.432,-0.216 -1.08,-0.486 -1.764,-0.73799997 l -0.099,-0.036 c -0.027,-0.009 -0.054,-0.018 -0.09,-0.027 l -0.09,-0.036 c -0.063,-0.027 -0.126,-0.045 -0.189,-0.063 l -0.09,-0.036 c -0.53100003,-0.18 -1.06200003,-0.342 -1.52100003,-0.45 l -0.432,0.504 c 0.54,0.126 1.17,0.33299997 1.78200003,0.55799997 l 0.09,0.036 c 0.765,0.279 1.494,0.594 1.971,0.837 z m -4.80600003,-0.65699997 -0.063,-0.612 c -0.243,0.045 -0.495,0.09 -0.756,0.135 l -0.099,0.018 -0.045,0.009 -0.198,0.036 -0.045,0.009 -0.099,0.018 c -0.027,0 -0.063,0.009 -0.099,0.018 l -0.09,0.018 c -0.792,0.135 -1.557,0.27 -2.061,0.351 l 0.126,0.65699997 z"/><path d="M 3.2850069,5.6159986 H 0.27900687 v -1.098 H 3.9960069 v -0.666 H 0.27900687 v -0.963 h -0.729 v 2.727 H -3.2939931 v 2.898 h 6.579 z m -5.877,2.232 v -1.566 h 5.139 v 1.566 z m 6.975,2.9610004 c -0.234,-0.468 -0.819,-1.3230004 -1.287,-1.8540004 l -0.648,0.243 c 0.459,0.531 1.035,1.4130004 1.242,1.8720004 z m -6.858,-1.6200004 -0.693,-0.171 c -0.009,0.018 -0.027,0.045 -0.045,0.063 l -0.045,0.072 c -0.369,0.549 -0.873,1.2600004 -1.224,1.6740004 l 0.666,0.315 c 0.396,-0.504 0.963,-1.3500004 1.341,-1.9530004 z m 4.347,1.6920004 c -0.108,-0.423 -0.45,-1.2420004 -0.729,-1.7460004 l -0.66600003,0.144 c 0.27,0.513 0.59400003,1.3590004 0.68400003,1.7640004 z m -2.49300003,0.099 c -0.009,-0.405 -0.126,-1.2510004 -0.243,-1.7730004 l -0.70199997,0.054 c 0.117,0.54 0.216,1.3860004 0.216,1.8090004 z"/></g><text class="chezhan" transform="translate(47.5 94.08)">`,
    `</text></g></g><g id="站名"><text class="fangxiang" transform="translate(2.5 249.01)">`,
    `</text><polygon class="fangxiang" points="31 248 40 252 31 232 22 252 31 248" /><text class="fangxianglat" transform="translate(31 247.6)">`,
    `</text><text class="tishi" transform="translate(41.52 239.43)" xml:space="preserve">`,
    `<tspan x="0" y="13" xml:space="preserve">`,
    `</tspan></text><g id="单行"><text class="biaoti" transform="translate(64 30.48)">`,
    `</text><text class="biaotilat" transform="translate(64 44.21)">`,
    `</text></g></g></svg>`
    ],[
    `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 256" width="128" height="256"><defs><style>.bj{fill:`,
    `;}.biaotibj{fill:`,
    `;}.biaoti{text-anchor:middle;font-size:24px;font-family:'思源宋体','思源宋体 CN','Source Han Serif','Source Han Serif CN';font-weight:900;fill:#fff;}.biaotilat{text-anchor:middle;font-size:11px;font-family:'Zilla Slab';font-weight:600;letter-spacing:0.01em;fill:#fff;}.luhaobj{fill:`,
    `;}.luhao{text-anchor:middle;font-family:Bahnschrift;font-size:16pt;fill:#fff;}.chezhan{font-size:16px;font-family:'kGlowSansSCCompressedBold';font-weight:700;}.zhushi{writing-mode:tb;text-orientation:upright;font-size:9px;font-family:'kGlowSansSCExtendedBook';font-weight:400;text-anchor:middle}.fangxianglat,.fangxiang,.tishi{font-family:Bahnschrift,MiSans;font-weight:500;fill:#fff}.fangxiang{font-size:18px;}.fangxianglat{font-size:9pt;fill:`,
    `;font-weight:700;font-stretch:semi-condensed;text-anchor:middle}.tishi{font-size:12px;}</style></defs><g id="背景"><rect class="bj" width="128" height="256" /><rect class="biaotibj" width="128" height="57" /><rect class="biaotibj" y="228" width="128" height="28" /></g><g id="线路"><g id="线路1" transform="translate(0 0)"><rect class="luhaobj" x="1.5" y="65" width="34.5" height="28" /><text class="luhao" transform="translate(19.5 86.3)">`,
    `</text><g transform="translate(42.38,66) scale(1 0.9)"><path d="m 0.18900687,-2.6100014 c 1.05300003,0.513 2.49300003,1.341 3.11400003,1.80900003 l 0.513,-0.63000003 c -0.378,-0.261 -1.008,-0.63 -1.674,-0.99 l -0.09,-0.045 -0.09,-0.045 c -0.054,-0.036 -0.117,-0.063 -0.171,-0.099 l -0.09,-0.045 c -0.486,-0.252 -0.97200003,-0.486 -1.37700003,-0.666 l -0.135,0.144 v -1.566 H 4.3380069 v -0.702 h -8.685 v 0.702 h 3.76199997 v 6.885 h 0.774 z" id="path47" /><path d="m 4.0680069,7.1639986 h -2.043 v -1.737 h 2.439 v -0.675 h -2.439 v -1.863 h -0.738 v 4.275 H -0.33299313 V 10.826999 H 4.0680069 Z m -5.931,-2.862 c -0.09,-0.189 -0.234,-0.468 -0.387,-0.756 l -0.045,-0.09 c -0.09,-0.18 -0.189,-0.369 -0.279,-0.513 l -0.612,0.18 c 0.081,0.162 0.18,0.36 0.279,0.567 l 0.036,0.09 c 0.135,0.279 0.261,0.558 0.333,0.729 z m 1.34999997,0.27 H -4.3199931 v 0.657 h 3.80699997 z m -0.045,4.824 -0.072,-0.648 -1.08899997,0.252 c 0.135,-0.486 0.297,-1.197 0.45,-1.89 l 0.018,-0.09 c 0.108,-0.504 0.207,-0.999 0.27899997,-1.404 l -0.69299997,-0.126 c -0.045,0.432 -0.135,0.99 -0.234,1.557 l -0.018,0.09 c -0.009,0.072 -0.018,0.135 -0.036,0.198 l -0.018,0.099 c -0.117,0.648 -0.252,1.269 -0.36,1.701 l -0.099,0.018 c -0.054,0.009 -0.099,0.027 -0.144,0.036 l -0.099,0.018 c -0.666,0.135 -1.305,0.27 -1.755,0.36 l 0.171,0.6930004 c 0.531,-0.126 1.233,-0.2880004 1.962,-0.4590004 l 0.09,-0.018 c 0.171,-0.045 0.342,-0.081 0.513,-0.126 l 0.099,-0.018 0.09,-0.027 c 0.324,-0.072 0.64799997,-0.153 0.94499997,-0.216 z m -2.29499997,-0.558 c -0.027,-0.414 -0.09,-0.99 -0.18,-1.593 l -0.018,-0.09 -0.018,-0.099 v -0.054 l -0.018,-0.09 c -0.009,-0.036 -0.009,-0.063 -0.018,-0.099 l -0.018,-0.099 c -0.063,-0.396 -0.144,-0.783 -0.225,-1.107 l -0.594,0.099 c 0.081,0.378 0.171,0.837 0.243,1.305 l 0.018,0.099 c 0.009,0.063 0.018,0.126 0.027,0.198 l 0.018,0.09 c 0.081,0.585 0.144,1.143 0.162,1.557 z M 0.37800687,10.160999 V 7.8299986 H 3.3300069 v 2.3310004 z" id="path49" /></g><text class="chezhan" transform="translate(47.5 74.08)">`,
    `</text><g transform="translate(42.38,86) scale(1 0.9)"><path d="m -1.1879931,-0.74700137 c -0.018,-0.117 -0.036,-0.38700003 -0.036,-0.57600003 l -2.079,0.261 c 0.279,-0.27 0.567,-0.594 0.855,-0.936 l 0.054,-0.072 c 0.045,-0.063 0.099,-0.126 0.144,-0.18 l 0.063,-0.072 c 0.099,-0.135 0.207,-0.27 0.306,-0.405 l 0.063,-0.081 c 0.18,-0.243 0.351,-0.486 0.513,-0.72 0.162,0.072 0.43199997,0.315 0.54899997,0.459 0.351,-0.279 0.729,-0.639 0.99,-0.945 0.333,0.405 0.711,0.864 1.08000003,1.215 -0.74700003,0.513 -1.67400003,0.999 -2.394,1.233 l 0.28799997,0.62100003 c 0.882,-0.33300003 1.87200003,-0.85500003 2.59200003,-1.41300003 0.711,0.558 1.53,1.116 2.439,1.43100003 l 0.288,-0.63900003 c -0.702,-0.216 -1.566,-0.702 -2.223,-1.215 0.621,-0.567 1.224,-1.395 1.593,-2.16 l -0.459,-0.261 -0.108,0.045 h -2.205 c 0.171,-0.252 0.342,-0.576 0.468,-0.828 l -0.76500003,-0.126 c -0.342,0.747 -1.143,1.854 -2.08799997,2.538 l 0.18,-0.279 -0.639,-0.333 c -0.189,0.306 -0.423,0.693 -0.63,0.972 l -1.251,0.126 c 0.549,-0.729 1.188,-1.845 1.602,-2.754 l -0.693,-0.279 c -0.387,1.017 -1.134,2.268 -1.332,2.547 -0.207,0.288 -0.387,0.531 -0.513,0.549 l 0.216,0.657 c 0.117,-0.054 0.414,-0.126 1.548,-0.243 -0.396,0.522 -0.819,1.026 -0.999,1.188 -0.288,0.297 -0.54,0.53100003 -0.693,0.55800003 l 0.207,0.639 c 0.198,-0.09 0.702,-0.18 3.069,-0.522 z m 1.84499997,-3.77100003 0.036,-0.045 H 2.9430069 c -0.297,0.459 -0.72,0.972 -1.143,1.35 -0.45,-0.378 -0.86400003,-0.873 -1.14300003,-1.305 z m 2.45700003,4.11300003 c -0.441,-0.288 -1.368,-0.76500003 -2.025,-0.98100003 l -0.44100003,0.44100003 c 0.70200003,0.234 1.60200003,0.738 2.02500003,1.035 z m 0.711,2.00699997 c -0.432,-0.216 -1.08,-0.486 -1.764,-0.73799997 l -0.099,-0.036 c -0.027,-0.009 -0.054,-0.018 -0.09,-0.027 l -0.09,-0.036 c -0.063,-0.027 -0.126,-0.045 -0.189,-0.063 l -0.09,-0.036 c -0.53100003,-0.18 -1.06200003,-0.342 -1.52100003,-0.45 l -0.432,0.504 c 0.54,0.126 1.17,0.33299997 1.78200003,0.55799997 l 0.09,0.036 c 0.765,0.279 1.494,0.594 1.971,0.837 z m -4.80600003,-0.65699997 -0.063,-0.612 c -0.243,0.045 -0.495,0.09 -0.756,0.135 l -0.099,0.018 -0.045,0.009 -0.198,0.036 -0.045,0.009 -0.099,0.018 c -0.027,0 -0.063,0.009 -0.099,0.018 l -0.09,0.018 c -0.792,0.135 -1.557,0.27 -2.061,0.351 l 0.126,0.65699997 z"/><path d="M 3.2850069,5.6159986 H 0.27900687 v -1.098 H 3.9960069 v -0.666 H 0.27900687 v -0.963 h -0.729 v 2.727 H -3.2939931 v 2.898 h 6.579 z m -5.877,2.232 v -1.566 h 5.139 v 1.566 z m 6.975,2.9610004 c -0.234,-0.468 -0.819,-1.3230004 -1.287,-1.8540004 l -0.648,0.243 c 0.459,0.531 1.035,1.4130004 1.242,1.8720004 z m -6.858,-1.6200004 -0.693,-0.171 c -0.009,0.018 -0.027,0.045 -0.045,0.063 l -0.045,0.072 c -0.369,0.549 -0.873,1.2600004 -1.224,1.6740004 l 0.666,0.315 c 0.396,-0.504 0.963,-1.3500004 1.341,-1.9530004 z m 4.347,1.6920004 c -0.108,-0.423 -0.45,-1.2420004 -0.729,-1.7460004 l -0.66600003,0.144 c 0.27,0.513 0.59400003,1.3590004 0.68400003,1.7640004 z m -2.49300003,0.099 c -0.009,-0.405 -0.126,-1.2510004 -0.243,-1.7730004 l -0.70199997,0.054 c 0.117,0.54 0.216,1.3860004 0.216,1.8090004 z"/></g><text class="chezhan" transform="translate(47.5 94.08)">`,
    `</text></g></g><g id="站名"><text class="fangxiang" transform="translate(2.5 249.01)">`,
    `</text><polygon class="fangxiang" points="31 248 40 252 31 232 22 252 31 248" /><text class="fangxianglat" transform="translate(31 247.6)">`,
    `</text><text class="tishi" transform="translate(41.52 239.43)" xml:space="preserve">`,
    `<tspan x="0" y="13" xml:space="preserve">`,
    `</tspan></text><g id="双行"><text class="biaoti" transform="translate(64 24.48)">`,
    `</text><text class="biaotilat"><tspan x="64" y="38.21">`,
    `</tspan></text></g></g></svg>`
    ]
]

var fxduiying = {
    'zhiheyu': {
        'F': '北',
        'R': '东',
        'P': '南',
        'K': '西'
    },
    'yingyu': {
        'N': '北',
        'E': '东',
        'S': '南',
        'W': '西'
    },
    'zidingyi': {
        'B': '北',
        'D': '东',
        'N': '南',
        'X': '西'
    }
}

var dangqianzhan = 0
var czsl = 0
var zp = []

function zidingyiyuyan() {
    var fxc = xinxi.fangxiangci.value
    if (fxc.length != 4) {
        fxc = 'BDNX'
    }
    fxduiying['zidingyi'] = {}
    fxduiying['zidingyi'][fxc[0]] = '北'
    fxduiying['zidingyi'][fxc[1]] = '东'
    fxduiying['zidingyi'][fxc[2]] = '南'
    fxduiying['zidingyi'][fxc[3]] = '西'
}

function jiexiliebiao() {
    // 获取车站列表
    var czlbh = xinxi.chezhanliebiao.value
    var czlbl = xinxi.chezhanliebiaolat.value
    // 按行切分
    czlbh = czlbh.split('\n')
    czlbl = czlbl.split('\n')
    // 提取方向
    var czfxlb = []
    var czfxlbh = []
    var yuyan = xinxi.yuyan.value
    if (yuyan == 'zidingyi') {
        zidingyiyuyan()
    }
    for (var i in czlbh) {
        czfxlb.push(czlbh[i].slice(-1))
        czfxlbh.push(fxduiying[yuyan][czfxlb[i]])
        czlbh[i] = czlbh[i].slice(0, -1)
    }
    var shuanghang = []
    for (var i in czlbl) {
        if (czlbl[i].search(';') != -1) {
            shuanghang.push(1)
            czlbl[i] = czlbl[i].replace(/;(.*?)$/g, '</tspan><tspan x="64" y="51.21">$1')
        } else {
            shuanghang.push(0)
        }
    }
    czlbh.push('——')
    // 返回
    var czlb = [czlbh, czlbl, czfxlbh, czfxlb, shuanghang]
    return czlb
}

function xianshi() {
    document.getElementById('zhanpaiyulan').innerHTML = zp[dangqianzhan]
}

function yulan() {
    // 获取路号
    var lh = xinxi.luhao.value
    // 获取车站列表
    var czlb = jiexiliebiao()
    // 获取底部提示
    var dbts = [xinxi.dibutishi1.value,xinxi.dibutishi2.value]
    // 获取格式
    var ds = geshi.dise.value
    var bts = geshi.biaotise.value
    var lhs = geshi.luhaose.value
    // 将信息填入svg
    czsl = czlb[0].length
    zp = []
    for (var i=0;i<czsl-1;i++) {
        var tiankong = [
            ds,
            bts,
            lhs,
            bts,
            lh,
            czlb[0][i+1],
            czlb[0][czsl-2],
            czlb[2][i],
            czlb[3][i],
            dbts[0],
            dbts[1],
            czlb[0][i],
            czlb[1][i]
        ]
        var danzhang = svgmoban[czlb[4][i]][0]
        for (var j=0;j<tiankong.length;j++) {
            danzhang = danzhang + tiankong[j]
            danzhang = danzhang + svgmoban[czlb[4][i]][j+1]
        }
        zp.push(danzhang)
    }
    dangqianzhan = 0
    xianshi()
    // document.getElementById('shengcheng').setAttribute('hidden','')
    var ylq = document.getElementById('yulanqu')
    ylq.removeAttribute('hidden')
    ylq.scrollIntoView()
}

function xiayizhang()
{
    if (dangqianzhan < czsl-2) {
        dangqianzhan++
    }
    xianshi()
}
function shangyizhang()
{
    if (dangqianzhan > 0) {
        dangqianzhan--
    }
    xianshi()
}

function xiazaidanzhang() {
    svgExport.downloadPng(
        zp[dangqianzhan],
        dangqianzhan,
        {
            width: 128,
            height: 256
        }
    )
}

function xiazaiquanbu() {
    for (i in zp) {
        svgExport.downloadPng(
            zp[i],
            i,
            {
                width: 128,
                height: 256
            }
        )
    }
}

function xiazaidanzhangsvg() {
    // 创建临时链接
    var linshilianjie = document.createElement('a')
    linshilianjie.download = dangqianzhan + '.svg'
    // 隐藏链接
    linshilianjie.style.display = 'none'
    // 当前站牌转成blob
    var blob = new Blob([zp[dangqianzhan]])
    linshilianjie.href = URL.createObjectURL(blob)
    // 点击链接
    document.body.appendChild(linshilianjie)
    linshilianjie.click()
    // 移除链接
    document.body.removeChild(linshilianjie)
}

function xiazaiquanbusvg() {
    // 初始化一个zip打包对象
    var zip = new JSZip();
    var svg = zip.folder('svg')
    for (i in zp) {
        svg.file('Kinboise' + i + '.svg', zp[i])
    }
    // 把打包内容异步转成blob二进制格式
    zip.generateAsync({type:"blob"}).then(function(content) {
    saveAs(content, "zhanpai.zip");
});
}